<!DOCTYPE HTML>
<html>

<head>
  <title>Encrypt Your Backup Key for Eden Smart Contract</title>
</head>
<script src=https://bitwiseshiftleft.github.io/sjcl/sjcl.js></script>
<body>
    Private Key:<textarea id="key" rows="1" cols="80"></textarea>
    <br>
    <br>
    <br>
    If not relevant, leave answers to the following questions empty.
    <br>
    1. What is the first name of your spouse's father?<input id="q1">
    <br>
    2. What was your High School Mascot?  <input id="q2">
    <br>
    3. In what city or town did you meet your spouse/partner?  <input id="q3">
    <br>
    4. In what city or town did your mother and father meet?  <input id="q4">
    <br>
    5. In what town or city was your first full time job?  <input id="q5">
    <br>
    6. What is the make of your first car?  <input id="q6">
    <br>
    7. What is the name of your first pet?  <input id="q7">
    <br>
    <br>
    <br>
<button id="encrypt">Encrypt My Key</button>
 
<hr>
<div id="result"></div>
 
<script>
function encrypt() {
    var q1 = document.getElementById('q1').value.trim();
    var q2 = document.getElementById('q2').value.trim();
    var q3 = document.getElementById('q3').value.trim();
    var q4 = document.getElementById('q4').value.trim();
    var q5 = document.getElementById('q5').value.trim();
    var q6 = document.getElementById('q6').value.trim();
    var q7 = document.getElementById('q7').value.trim();
    var key = document.getElementById('key').value.trim();

    var encryptionkey = q1 + q2 + q3 + q4 + q5 + q6 + q7;
    var encrypteddata = sjcl.encrypt(encryptionkey, key);
    var data = { qsource : "QmNY5oxKAzZwf6UswT1h3WWwWqMw58S2Qtdbjz2QVPmqEY"};
    data.qlist = [];
    if (!!q1) data.qlist.push(1);
    if (!!q2) data.qlist.push(2);
    if (!!q3) data.qlist.push(3);
    if (!!q4) data.qlist.push(4);
    if (!!q5) data.qlist.push(5);
    if (!!q6) data.qlist.push(6);
    if (!!q7) data.qlist.push(7);

    data.datatype = "privatekey";
    data.encrypteddata = encrypteddata;
    var b64encrypteddata = window.btoa(JSON.stringify(data));

    alert ("Copy following string in the clipboard and use it in the Eden Smart Contract:\n\n"+ b64encrypteddata);

}

document.getElementById('encrypt').addEventListener('click', encrypt);
</script>
</body>

</html>
